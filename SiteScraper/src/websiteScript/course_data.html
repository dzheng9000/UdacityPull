<?php
  $servername = "localhost";
  $username = "root";
  $password = "";
  $dbname = "moocs160";
  // Create connection
  $conn = new mysqli($servername, $username, $password, $dbname);
// Check connection
   if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
	}
?>

<html>
	<head>
		<title>Course Data</title>
		
		<h1>Course Data for 
		<a href="https://www.udacity.com/">Udacity</a> and
		<a href="https://www.futurelearn.com/">FutureLearn</a>
		</h1>
    </head>
	<body>
		<?php
			$query = "SELECT * FROM `course_data`";
			$result = mysqli_query($conn, $query);
			
			echo "<table border='1'>
			<tr>
			<th>ID</th>
			<th>Title</th>
			<th>Short Description</th>
			<th>Long Description</th>
			<th>Course Link</th>
			<th>Video Link</th>
			<th>Start Date</th>
			<th>Course Lenght</th>
			<th>Course Image</th>
			<th>Category</th>
			<th>Site</th>
			<th>Course fee</th>
			<th>Language</th>
			<th>Certificate</th>
			<th>University</th>
			<th>Time Scrapped</th>
			</tr>";
			
			while ($row = mysqli_fetch_array($result)) {
				echo "<tr>";
				echo "<td>" . $row['id'] . "</td>";
				echo "<td>" . $row['title'] . "</td>";
				echo "<td>" . $row['short_desc'] . "</td>";
				$text = $row['long_desc'];
				if (strlen($text) > 10) {
					$text = substr($text, 0, 20).'...';
				}
				echo "<td>" . $text . "</td>";
				$link = $row['course_link'];
				echo "<td><a href='$link'>Course Link</a></td>";
				$vlink = $row['video_link'];
				echo "<td><a href='$vlink'>Video Link</a></td>";
				echo "<td>" . $row['start_date'] . "</td>";
				echo "<td>" . $row['course_length'] . "</td>";
				$img = $row['course_image'];
				echo "<td><img src='$img' style='width:100px;height:100px'></td>";
				echo "<td>" . $row['category'] . "</td>";
				echo "<td>" . $row['site'] . "</td>";
				echo "<td>" . $row['course_fee'] . "</td>";
				echo "<td>" . $row['language'] . "</td>";
				echo "<td>" . $row['certificate'] . "</td>";
				echo "<td>" . $row['university'] . "</td>";
				echo "<td>" . $row['time_scraped'] . "</td>";
				echo "</tr>";
			}
			echo "</table>";
			
			mysqli_close($conn);
		?>
	</body>
</html>

